<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    
    <script src="https://rdub80.github.io/aframe-gui/examples/js/aframe-gui.js" type="text/javascript"></script>
    <script src="https://rdub80.github.io/aframe-gui/examples/js/gui-env.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.155.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.155.0/examples/jsm/"
        }
      }
    </script>
  </head>
  <body>
    <a-scene log="scene rendererd!" cursor="rayOrigin: mouse">
      <a-assets>
        <img id="menuBackgroundImg" crossorigin="anonymous" src="/vrapp/menu/assets/images/zenMode.png">
      </a-assets>

      <a-videosphere id="video-sphere" src=""></a-videosphere>

      <a-sky id="skybgimg" rotation="0 300 0" radius="30" src="#menuBackgroundImg"></a-sky>

      <a-gui-flex-container
        flex-direction="column" justify-content="center" align-items="center"
        opacity="0.4" width="4" height="6.5" panel-color="#cecece" panel-rounded="0.4" transparent="true"
        position="0 3 -7" rotation="0 0 0" id="menu"
      >
        <a-entity
          gui-item="type: label;
                    width: 3;
                    height: 0.5;
                    margin: 0 0 0.6 0;"

          gui-label="value: THERAPY;
                     font-family: /vrapp/assets/fonts/Realized.ttf;
                     font-size: 0.35;
                     panel-rounded: 0.4;
                     font-color: #604287;
                     active-color: white;
                     hover-color: white;
                     focus-color: white;
                     background-color: white;
                     opacity: 0.4;"
        >
        </a-entity>

        <a-entity
          gui-item="type: button;
                    width: 3;
                    height: 0.5;
                    margin: 0 0 0.6 0;"

          gui-interactable="clickAction: playVideo1;"
          gui-button="value: LONDON BRIDGE;
                     font-family: /vrapp/assets/fonts/Realized.ttf;
                     font-size: 0.25;
                     panel-rounded: 0.4;
                     font-color: white;
                     active-color: #604287;
                     hover-color: #604287;
                     focus-color: #604287;
                     background-color: #604287;"
        >
        </a-entity>

        <a-entity
          gui-item="type: button;
                    width: 3;
                    height: 0.5;
                    margin: 0 0 0.6 0;"

          gui-interactable="clickAction: playVideo2;"
          gui-button="value: FOREST VIEW;
                     font-family: /vrapp/assets/fonts/Realized.ttf;
                     font-size: 0.25;
                     panel-rounded: 0.4;
                     font-color: white;
                     active-color: #604287;
                     hover-color: #604287;
                     focus-color: #604287;
                     background-color: #604287;"
        >
        </a-entity>

        <a-entity
          gui-item="type: button;
                    width: 3;
                    height: 0.5;
                    margin: 0 0 1 0;"

          gui-interactable="clickAction: playVideo3;"
          gui-button="value: BEACH VIEW;
                     font-family: /vrapp/assets/fonts/Realized.ttf;
                     font-size: 0.25;
                     panel-rounded: 0.4;
                     font-color: white;
                     active-color: #604287;
                     hover-color: #604287;
                     focus-color: #604287;
                     background-color: #604287;"
        >
        </a-entity>

        <a-entity
          gui-item="type: button;
                    width: 3;
                    height: 0.5;
                    margin: 0 0 0 0;"

          gui-interactable="clickAction: backtoMainMenu;"
          gui-button="value: MAIN MENU;
                     font-family: /vrapp/assets/fonts/Realized.ttf;
                     font-size: 0.25;
                     panel-rounded: 0.4;
                     font-color: white;
                     active-color: #604287;
                     hover-color: #604287;
                     focus-color: #604287;
                     background-color: #604287;"
        >
        </a-entity>

      </a-gui-flex-container>

      <!-- Mouse cursor so we can click on the scene with mouse or touch. -->
      <a-entity id="mouseCursor" cursor="rayOrigin: mouse" raycaster="objects: [gui-interactable]"></a-entity>
      <a-entity id="leftHand" laser-controls="hand: left" raycaster="objects: [gui-interactable]"></a-entity>
      <a-entity id="rightHand" laser-controls="hand: right" raycaster="objects: [gui-interactable]"></a-entity>

      <a-entity id="cameraRig">
        <a-camera look-controls wasd-controls>
        </a-camera>
      </a-entity>

    </a-scene>
  </body>
  <script type="text/javascript">
        
    function playVideo1() {
        $('#video-sphere').attr('src', 'video1.mp4');
        $('#menu').remove();
        $('#skybgimg').remove();
    }
    function playVideo2() {
        $('#video-sphere').attr('src', 'video1.mp4');
        $('#menu').remove();
        $('#skybgimg').remove();
    }
    function playVideo3() {
        $('#video-sphere').attr('src', 'video1.mp4');
        $('#menu').remove();
        $('#skybgimg').remove();
    }
    function backtoMainMenu(){
        window.open("/vrapp/menu/index.html", "_self");
    }

    window.addEventListener('vrcontrollerconnected', function (event) {
      const controller = event.detail;
      controller.addEventListener('triggerpull', function (event) {
            alert("heyy!!");
        });
    });
    alert("heyy!!");

  </script>
</html>