<!DOCTYPE html>
<html>
    <head>

        <!-- aframe files -->
        <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
        <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
        
        <!-- aframe-gui components and click events files -->
        <script src="https://rdub80.github.io/aframe-gui/examples/js/aframe-gui.js" type="text/javascript"></script>
        <script src="https://rdub80.github.io/aframe-gui/examples/js/gui-env.js" type="text/javascript"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

        <!-- User-defined event listeners -->        
        <script src="app.js"></script>

        <!-- Import Fitness HandWorkout files -->
        <script type="text/javascript" src="/vrapp/menu/fitness/handworkout/index.js"></script>
        <script type="text/javascript" src="/vrapp/menu/fitness/handworkout/cubeSpawner.js"></script>
        <script type="text/javascript" src="/vrapp/menu/fitness/handworkout/cubeDestroyer.js"></script>
        <script type="text/javascript" src="/vrapp/menu/fitness/handworkout/cubeMovement.js"></script>
        <script type="text/javascript" src="/vrapp/menu/fitness/handworkout/saber.js"></script>
        <script type="text/javascript" src="/vrapp/menu/fitness/handworkout/scoreCounter.js"></script>

        <!-- To load in VR mode by default -->
        <script src='https://cdn.jsdelivr.net/npm/webvr-polyfill@latest/build/webvr-polyfill.js'></script>

        <script type="importmap">
        {
            "imports": {
            "three": "https://unpkg.com/three@0.155.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.155.0/examples/jsm/"
            }
        }
        </script>
    </head>
  <body>
    <!-- Intro Logo Scene -->
    <a-scene gui-env id="idIntroLogoScene" style="display: none">
        
    </a-scene>

    <!-- Main Menu Scene -->
    <a-scene log="scene rendererd!" cursor="rayOrigin: mouse" gui-env id="idMainMenuScene">
      <a-assets>
        <img id="menuBackgroundImg" crossorigin="anonymous" src="/vrapp/menu/assets/images/zenMode.png">
      </a-assets>

      <a-sky id="skybgimg" rotation="0 300 0" radius="30" src="#menuBackgroundImg"></a-sky>

      <a-gui-flex-container
        flex-direction="column" justify-content="center" align-items="center"
        opacity="0.4" width="4" height="6.5" panel-color="#cecece" panel-rounded="0.4" transparent="true"
        position="0 3 -7" rotation="0 0 0"
      >
        <a-entity
          gui-item="type: button;
                    width: 3;
                    height: 0.5;
                    margin: 0 0 0.6 0;"

          gui-interactable="clickAction: openTherapySubMenu;"
          gui-button="value: THERAPY;
                     font-family: /vrapp/assets/fonts/Realized.ttf;
                     font-size: 0.25;
                     panel-rounded: 0.4;
                     font-color: white;
                     active-color: #604287;
                     hover-color: #604287;
                     focus-color: #604287;
                     background-color: #604287;
                     opacity: 0.5;"
        >
        </a-entity>

        <a-entity
          gui-item="type: button;
                    width: 3;
                    height: 0.5;
                    margin: 0 0 0.6 0;"

          gui-interactable="clickAction: openFitnessSubMenu;"
          gui-button="value: HANDWORKOUT;
                     font-family: /vrapp/assets/fonts/Realized.ttf;
                     font-size: 0.25;
                     panel-rounded: 0.4;
                     font-color: white;
                     active-color: #604287;
                     hover-color: #604287;
                     focus-color: #604287;
                     background-color: #604287;
                     opacity: 0.5;"
        >
        </a-entity>

        <a-entity
          gui-item="type: button;
                    width: 3;
                    height: 0.5;
                    margin: 0 0 0.6 0;"

          gui-button="value: CUSTOMIZE;
                     font-family: /vrapp/assets/fonts/Realized.ttf;
                     font-size: 0.25;
                     panel-rounded: 0.4;
                     font-color: white;
                     active-color: #604287;
                     hover-color: #604287;
                     focus-color: #604287;
                     background-color: #604287;
                     opacity: 0.5;"
        >
        </a-entity>

        <a-entity
          gui-item="type: button;
                    width: 3;
                    height: 0.5;
                    margin: 0 0 0.6 0;"

          gui-button="value: DASHBOARD;
                     font-family: /vrapp/assets/fonts/Realized.ttf;
                     font-size: 0.25;
                     panel-rounded: 0.4;
                     font-color: white;
                     active-color: #604287;
                     hover-color: #604287;
                     focus-color: #604287;
                     background-color: #604287;
                     opacity: 0.5;"
        >
        </a-entity>

        <a-entity
          gui-item="type: button;
                    width: 3;
                    height: 0.5;
                    margin: 0 0 0 0;"

          gui-button="value: ONLINE CHALLENGES;
                     font-family: /vrapp/assets/fonts/Realized.ttf;
                     font-size: 0.25;
                     panel-rounded: 0.4;
                     font-color: white;
                     active-color: #604287;
                     hover-color: #604287;
                     focus-color: #604287;
                     background-color: #604287;
                     opacity: 0.5;"
        >
        </a-entity>

      </a-gui-flex-container>

      <!-- Mouse cursor so we can click on the scene with mouse or touch. -->
      <a-entity id="mouseCursor" cursor="rayOrigin: mouse" raycaster="objects: [gui-interactable]"></a-entity>
      <a-entity id="leftHand" laser-controls="hand: left" raycaster="objects: [gui-interactable]"></a-entity>
      <a-entity id="rightHand" laser-controls="hand: right" raycaster="objects: [gui-interactable]"></a-entity>

      <a-entity id="cameraRig">
        <a-camera look-controls wasd-controls>
        </a-camera>
      </a-entity>

    </a-scene>

    <!-- Smart Therapy -->
    <a-scene gui-env id="idSmartTherapyScene" style="display: none">
        
    </a-scene>

    <!-- Hand Tracking Fitness -->
    <a-scene renderer="antialias: true" pool__cubes="mixin: cube; size: 10; dynamic: true" scorecounter gui-env id="idHandTrackingScene" style="display: none"
    >
      <a-assets>
        <!-- Sound assets -->
        <audio id="hitLeft" src="/vrapp/menu/fitness/assets/sounds/beatHit.ogg"></audio>
        <audio id="hitRight" src="/vrapp/menu/fitness/assets/sounds/beatHit.ogg"></audio>
        <!-- Image assets -->
        <!-- <img
          id="sechelt"
          crossorigin="anonymous"
          src="/vrapp/menu/fitness/handworkout/assets/images/background-galaxy.png"
        ></img> -->
        <a-mixin
          id="cube"
          class="cubes"
          geometry="primitive: box"
          position="0 1 -25"
          scale="0.4 0.4 0.4"
          cubemovement
          cubedestroyer
        ></a-mixin>
      </a-assets>
      <a-entity id="score" text="value: Score: 0" position="0 2.2 -1"></a-entity>
      <a-entity id="height" text="value: height: 0" position="0 1.2 -1"></a-entity>

      <a-entity
        id="mouseCursor"
        cursor="rayOrigin: mouse"
        raycaster="objects: [gui-interactable]"
      ></a-entity>
      <a-camera look-controls id="playerCamera" log></a-camera>

      <!-- <a-sky id="image-360" rotation="0 180 0" radius="30" src="#sechelt"></a-sky> -->
      <a-entity
        hand-controls="right"
        haptics="events: sabercollided; dur: 1000; force: 0.5"
        saber="blue"
        aabb-collider="objects: .cubes"
      ></a-entity>

      <a-entity
        hand-controls="left"
        haptics="events: sabercollided; dur: 1000; force: 0.5"
        aabb-collider="objects: .cubes"
        saber="red"
        raycaster="objects: [gui-interactable]"
      ></a-entity>
      <a-entity id="hitSound" sound="src: #hitLeft" hitSound></a-entity>

      <a-entity
        hand-controls="right"
        haptics="events: sabercollided; dur: 1000; force: 0.5"
        saber="blue"
        aabb-collider="objects: .cubes"
        raycaster="objects: [gui-interactable]"
      ></a-entity>
      <a-entity
        id="startPlay"
        position="0 0.5 -5"
        gui-item="type: button;
                        width: 2;
                        height: 0.7;"
        gui-interactable="clickAction: startPlay;"
        gui-button="value: Start;
                         font-family: /vrapp/assets/fonts/Realized.ttf;
                         font-size: 0.25;
                         font-size: 0.25;
                         font-color: black;
                         border-radius: 2;
                         active-color: #604287;
                         hover-color: #604287;
                         focus-color: #604287;
                         background-color: orange;
                         opacity: 0.5;"
      ></a-entity>
      <a-plane
        position="0 0 -20"
        rotation="-90 0 0"
        width="0"
        height="40"
        color="#7BC8A4"
      ></a-plane>
    </a-scene>

  </body>
</html>